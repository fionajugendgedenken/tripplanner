ğŸŒŸ ENHANCED TRIP PLANNER - COMPLETE SYSTEM
================================================================================
ğŸ“… Trip Period: 2025-06-14 to 2025-06-22
ğŸ¯ User Preferences:
   POI Desirability: 1
   Cost Sensitivity: 0.01
   Transportation Averseness: 0.2
================================================================================
ğŸ“ Output will be saved to:
   Log file: trip_planner_output\trip_planner_log_20250606_013025.txt
   Results file: trip_planner_output\trip_plans_20250606_013025.txt
================================================================================

ğŸš€ 1. INITIALIZING TRIP PLANNER...
Enhanced Trip Planner initialized for 2025-06-14 to 2025-06-22
Objective weights: POI=1, Cost=0.01, Transport=0.2

ğŸ“Š 2. LOADING DATA...
Loading and processing all data files...
1. Loading POI list...
   Loaded 109 POIs across 5 cities
2. Processing detailed POI data...
Loading and processing POI data...
  Processed 110 POIs across 5 locations:
    Athens, Greece: 34 total (R:8, H:7, T:3, P:31)
    Crete, Greece: 17 total (R:0, H:1, T:6, P:11)
    Santorini, Greece: 19 total (R:1, H:6, T:3, P:16)
    Milos, Greece: 21 total (R:4, H:5, T:2, P:19)
    Zakynthos, Greece: 19 total (R:1, H:5, T:2, P:17)
3. Loading and filtering transportation...
Loading and filtering transportation data...
  Processing flights...
  Processing ferries...
  Organized 530 transportation options
  Available dates: 9
    2025-06-14: 5 origins
      Athens, Greece: 4 destinations, 13 total options
      Crete, Greece: 4 destinations, 12 total options
    2025-06-15: 5 origins
      Athens, Greece: 4 destinations, 12 total options
      Crete, Greece: 4 destinations, 10 total options
    2025-06-16: 5 origins
      Athens, Greece: 4 destinations, 11 total options
      Crete, Greece: 3 destinations, 10 total options
4. Processing POI routes...
Loading and processing POI routes...
  Selected 2424 preferred routes from 2424 pairs
5. Organizing routes by location...
Organizing routes by location...
  Organized 2038 intra-city routes across 5 locations
  Skipped 386 inter-city routes
    Athens, Greece: 930 routes from 31 origins
    Zakynthos, Greece: 342 routes from 19 origins
    Santorini, Greece: 272 routes from 17 origins
    Crete, Greece: 152 routes from 14 origins
    Milos, Greece: 342 routes from 19 origins
Data loading completed in 0.08 seconds
Statistics: {'loading_time_seconds': 0.07598185539245605, 'poi_count': 109, 'cities_count': 5, 'detailed_poi_locations': 5, 'transportation_dates': 9, 'total_transportation_options': 530, 'route_locations': 5, 'total_routes': 2038}
   âœ… Data loaded in 0.08s
   ğŸ“Š Statistics:
      POIs: 109
      Cities: 5
      Transportation options: 530
      Routes: 2038

âš™ï¸  3. INITIALIZING OPTIMIZERS...
Initializing optimizer components...
Initialized IntracitySubproblemSolver with routes for 5 locations
Initialized HotelSelector with routes for 5 locations
InterCityOptimizer initialized for 9 days
Cities: ['Athens, Greece', 'Crete, Greece', 'Santorini, Greece', 'Milos, Greece', 'Zakynthos, Greece']
Transportation hubs identified: 0
Initialized IntracitySubproblemSolver with routes for 5 locations
Initialized HotelSelector with routes for 5 locations
Optimizer components initialized successfully
   âœ… Optimizers initialized in 0.00s

ğŸ¯ 4. PLANNING MULTIPLE TRIP ALTERNATIVES...
Starting multi-trip planning with beam width 10...
ğŸš€ Starting inter-city optimization...
ğŸ“… Trip dates: ['2025-06-14', '2025-06-15', '2025-06-16', '2025-06-17', '2025-06-18', '2025-06-19', '2025-06-20', '2025-06-21', '2025-06-22']
ğŸ™ï¸  Available cities: ['Athens, Greece', 'Crete, Greece', 'Santorini, Greece', 'Milos, Greece', 'Zakynthos, Greece']
âš™ï¸  Beam width: 10, Return top: 5
ğŸ¨ Selecting initial hotel in Athens...
               ğŸ¨ Hotel selection for Athens, Greece:
                  Already visited in Athens, Greece: set()
                  Current hotel: None
                  Date: 2025-06-14
        âŒ [HotelSelector] estimated_cost is not a list: <class 'NoneType'>
      âŒ [HotelSelector] Amanzoe - No cost info for 2025-06-14
                  âœ… Selected: Grand Hyatt Athens
ğŸ¨ Selected initial hotel: Grand Hyatt Athens
âœ… Added Grand Hyatt Athens to visited hotels for Athens
ğŸ“… Creating first day schedule from ATH Airport...
   ğŸ” [DEBUG] _create_first_day_from_airport called
      State: InterCityState(current_day=0, current_city='Athens, Greece', current_hotel='Grand Hyatt Athens', visited_cities={'Athens, Greece'}, visited_pois_by_city={}, visited_hotels_by_city={'Athens, Greece': {'Grand Hyatt Athens'}}, total_objective_score=0.0, total_cost=0.0, daily_schedule=[])
      Hotel: Grand Hyatt Athens
      Hotel info type: <class 'dict'>
      Hotel info keys: ['name', 'city', 'date', 'info']
      âœ… Arrival time set: 2025-06-14 12:00:00
      âœ… Hotel info validated
      ğŸ” Calculating travel time from Athens Airport to Grand Hyatt Athens
      âœ… Airport to hotel time: 45 minutes
      âœ… Tourism window: 13:15 - 22:00
      ğŸ” Calling subproblem_solver.solve_subproblem...
    ğŸ” [SubproblemSolver] Starting solve_subproblem
    ğŸ“ City: Athens, Greece
    ğŸ¨ Start POI: Grand Hyatt Athens
    ğŸ¯ End POI: Grand Hyatt Athens
    ğŸ• Time: 13:15 - 22:00
    ğŸ“… Date: 2025-06-14
    ğŸ¯ Beam width: 5
    ğŸš« Global visited POIs: 0
    â±ï¸  Duration: 8.8 hours
    ğŸ½ï¸  Restaurant required: True
      ğŸ” [SubproblemSolver] Getting POIs for Athens, Greece
      ğŸš« [SubproblemSolver] Global visited POIs: set()
      ğŸ“Š [SubproblemSolver] Found 34 POIs in Athens, Greece
      ğŸ“Š [SubproblemSolver] Summary: 34 processed, 0 visited, 3 transport, 31 available
    ğŸ“Š [SubproblemSolver] Found 31 available POIs
    ğŸš€ [SubproblemSolver] Starting beam search with initial score: 0.0
    ğŸ† [SubproblemSolver] Beam search completed
    ğŸ“Š Final objective score: 108.34
    ğŸ›ï¸  POIs visited: 6
    ğŸ½ï¸  Restaurants: 1
    âœ… Feasible: True
    ğŸ“ Path details:
        1. 13:23-14:53: Ancient Agora
           â±ï¸  Duration: 90min, â­ Pref: 50, ğŸ’° Cost: $30.81
           ğŸšŒ Travel: driving
        2. 15:10-17:25: Acropolis of Athens
           â±ï¸  Duration: 135min, â­ Pref: 50, ğŸ’° Cost: $34.07
           ğŸšŒ Travel: walking
        3. 17:35-19:20: Acropolis Museum
           â±ï¸  Duration: 105min, â­ Pref: 4, ğŸ’° Cost: $22.72
           ğŸšŒ Travel: walking
        4. 19:32-20:47: Lycabettus Hill Viewing Area
           â±ï¸  Duration: 75min, â­ Pref: 5, ğŸ’° Cost: $12.40
           ğŸšŒ Travel: driving
        5. 21:02-21:32: Opos Palia
           â±ï¸  Duration: 30min, â­ Pref: 1, ğŸ’° Cost: $34.40
           ğŸšŒ Travel: driving
        6. 21:40-21:40: Grand Hyatt Athens
           â±ï¸  Duration: 0min, â­ Pref: 0, ğŸ’° Cost: $8.10
           ğŸšŒ Travel: driving
    ğŸ’° Total costs: $142.50
    ğŸšŒ Total travel time: 70.2 min
      âœ… Subproblem solved successfully
         Objective score: 108.34100000000001
         Feasible: True
      ğŸ” Calculating hotel score and cost...
      âœ… Hotel calculation: score=50.0, cost=335.0
      ğŸ” Calculating airport transfer cost...
      âœ… Airport transfer cost: $22.5
   First day costs: Hotel=$335.00, Airport transfer=$22.50
âœ… First day schedule created:
   Score: 158.34
   Cost: $357.50
   Visited POIs: 6
âœ… Added Grand Hyatt Athens to visited POIs for Athens
ğŸ“Š Initial state prepared:
   Current day: 1
   Current city: Athens, Greece
   Current hotel: Grand Hyatt Athens
   Objective score: 158.34
   Total cost: $357.50
ğŸ” Starting beam search...
ğŸ” Enhanced beam search starting with 1 initial states
   Initial score: 158.34
   Days to process: 9

ğŸ“… Day 2/9: Processing beam of 1 states...
   âœ… State 1: day=1, city=Athens, Greece, score=158.34
   ğŸ“Š Extracted 1 states, 1 match current day
   ğŸ”„ Processing state 1/1: Athens, Greece -> ?
         ğŸ Pipeline Step 1: Current state
            Start city: Athens, Greece
            Start hotel: Grand Hyatt Athens
            Date: 2025-06-15
            Visited cities: {'Athens, Greece'}
            ğŸ¯ Analyzing destination constraints:
               Current city: Athens, Greece
               Day: 2/9
               Visited cities: {'Athens, Greece'}
               ğŸŒ Middle days: Using AC-3 constraint propagation
               ğŸ• Days until second-to-last day: 6
               âœ… Added Athens, Greece (stay option)
               â­ï¸  Skipped Athens, Greece (current city, already added as stay)
               âœ… Added Crete, Greece (unvisited)
               âœ… Added Santorini, Greece (unvisited)
               âœ… Added Milos, Greece (unvisited)
               âœ… Added Zakynthos, Greece (unvisited)
               ğŸ“‹ Final destination choices: ['Athens, Greece', 'Crete, Greece', 'Santorini, Greece', 'Milos, Greece', 'Zakynthos, Greece']
               ğŸš€ AC-3 constraint propagation: Eliminated 1 infeasible destinations
         ğŸ—ºï¸  Pipeline Step 2: Destination choices
            Available destinations: ['Athens, Greece', 'Crete, Greece', 'Santorini, Greece', 'Milos, Greece', 'Zakynthos, Greece']
         ğŸ™ï¸  Pipeline Step 3: Processing destination 1/5: Athens, Greece
               ğŸ¨ Hotel selection for Athens, Greece:
                  Already visited in Athens, Greece: {'Grand Hyatt Athens'}
                  Current hotel: Grand Hyatt Athens
                  Date: 2025-06-15
        âŒ [HotelSelector] estimated_cost is not a list: <class 'NoneType'>
      âŒ [HotelSelector] Amanzoe - No cost info for 2025-06-15
                  âœ… Selected: Grand Hyatt Athens
            ğŸ¨ Best hotel in Athens, Greece: Grand Hyatt Athens
            ğŸ  Staying in same city: Athens, Greece
               ğŸ  Generating stay successor:
                  City: Athens, Greece
                  Start hotel: Grand Hyatt Athens
                  End hotel: Grand Hyatt Athens
                  Date: 2025-06-15
                  Time window: 09:00 - 22:00
    ğŸ” [SubproblemSolver] Starting solve_subproblem
    ğŸ“ City: Athens, Greece
    ğŸ¨ Start POI: Grand Hyatt Athens
    ğŸ¯ End POI: Grand Hyatt Athens
    ğŸ• Time: 09:00 - 22:00
    ğŸ“… Date: 2025-06-15
    ğŸ¯ Beam width: 5
    ğŸš« Global visited POIs: 6
    â±ï¸  Duration: 13.0 hours
    ğŸ½ï¸  Restaurant required: True
      ğŸ” [SubproblemSolver] Getting POIs for Athens, Greece
      ğŸš« [SubproblemSolver] Global visited POIs: {'Ancient Agora', 'Grand Hyatt Athens', 'Opos Palia', 'Lycabettus Hill Viewing Area', 'Acropolis Museum', 'Acropolis of Athens'}
      ğŸ“Š [SubproblemSolver] Found 34 POIs in Athens, Greece
      ğŸ“Š [SubproblemSolver] Summary: 34 processed, 6 visited, 3 transport, 25 available
    ğŸ“Š [SubproblemSolver] Found 25 available POIs
    ğŸš€ [SubproblemSolver] Starting beam search with initial score: 0.0
    ğŸ† [SubproblemSolver] Beam search completed
    ğŸ“Š Final objective score: 57.89
    ğŸ›ï¸  POIs visited: 8
    ğŸ½ï¸  Restaurants: 3
    âœ… Feasible: True
    ğŸ“ Path details:
        1. 09:04-09:26: Arch of Hadrian
           â±ï¸  Duration: 22min, â­ Pref: 1, ğŸ’° Cost: $4.00
           ğŸšŒ Travel: driving
        2. 09:37-10:37: Metropolis Roof Garden
           â±ï¸  Duration: 60min, â­ Pref: 3, ğŸ’° Cost: $0.00
           ğŸšŒ Travel: walking
        3. 10:55-12:55: Dionysos Zonar's
           â±ï¸  Duration: 120min, â­ Pref: 3, ğŸ’° Cost: $80.00
           ğŸšŒ Travel: walking
        4. 13:09-14:54: Archaeological Museum
           â±ï¸  Duration: 105min, â­ Pref: 2, ğŸ’° Cost: $27.33
           ğŸšŒ Travel: driving
        5. 15:03-17:03: Orizones
           â±ï¸  Duration: 120min, â­ Pref: 2, ğŸ’° Cost: $88.60
           ğŸšŒ Travel: driving
        6. 17:13-18:28: Athens National Garden
           â±ï¸  Duration: 75min, â­ Pref: 1, ğŸ’° Cost: $10.60
           ğŸšŒ Travel: driving
        7. 18:41-21:41: Delta Restaurant
           â±ï¸  Duration: 180min, â­ Pref: 50, ğŸ’° Cost: $162.50
           ğŸšŒ Travel: driving
        8. 21:49-21:49: Grand Hyatt Athens
           â±ï¸  Duration: 0min, â­ Pref: 0, ğŸ’° Cost: $8.30
           ğŸšŒ Travel: driving
    ğŸ’° Total costs: $381.33
    ğŸšŒ Total travel time: 87.6 min
                  Subproblem score: 57.89
                  Subproblem feasible: True
                  Hotel score: 50.00, cost: $326.00
                  Total day score: 104.63
                  âœ… Stay successor created: new day=2, score=262.98
            âœ… Generated stay successor: score=262.98
         ğŸ™ï¸  Pipeline Step 3: Processing destination 2/5: Crete, Greece
               ğŸ¨ Hotel selection for Crete, Greece:
                  Already visited in Crete, Greece: set()
                  Current hotel: None
                  Date: 2025-06-15
                  âœ… Selected: Acro Wellness Suites
            ğŸ¨ Best hotel in Crete, Greece: Acro Wellness Suites
            âœˆï¸  Traveling from Athens, Greece to Crete, Greece

âŒ ERROR: Trip planning failed!
Error details: 'InterCityOptimizer' object has no attribute 'current_hotel'
